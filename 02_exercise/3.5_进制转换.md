## 3.5 进制转换

对于一个P进制的数，如果要转换为Q进制，需要分为两步：

1. 将P进制数x转换为十进制数y。

对于一个十进制的数 `y=d1d2...dn`，它可以写成这个形式：

```md
y = d1*10^n-1 + d2*10^n2 + ... + dn-1*10 + dn
```

同理，如果P进制数x为 `a1a2...an`，那么它写成下面这个形式之后使用十进制的加法和乘法，就可以转换为十进制数y：

```md
y = a1*P^n-1 + a2*P^n-2 + ... + an-1*P + an
```

而这个公式可以很容易用循环进行实现：

```cpp
int x, P;
int y, product = 1; // product是P进制某位上的权重1 = P^0
scanf("%d %d", &P, &x);
while(x != 0){
    y = y + (x % 10)*product;   // 取最小位上数乘以权重(p^product)
    x /= 10;    // 去掉最小位
    product *= P;   // 从最小到最大位上权重
}
```

2. 将十进制数y转换为Q进制数z。

采用“除基取余法”。所谓的“基”是指将要转换成的进制Q，因此除基取余的意思就是每次将待转换数除以Q，然后将得到的余数作为低位存储，而商则继续除以Q并进行上面的操作，最后当商为0时，将所有位从高到低输出就可以得到z。例如，将十进制数11转换为二进制数：

```cpp
/*
11除以2，得商为5，余数为1；
5除以2，得商为2，余数为1；
2除以2，得商为1，余数为0；
1除以2，得商为0，余数为1，算法终止。
将余数从后往前输出，得 1011 即为 11 的二进制数
*/
// 2.将十进制数y转换为Q进制数z——除基取余法
int z[40], Q = 8, num = 0;  // num为位数，Q是进制，数组z存放Q进制y的每一位
// 如果y恰好为0，则z[0] = 0
do{
    z[num++] = y % Q;   // 除基取余，数组z从高位z[num-1]到低位z[0]即为Q进制z
    y /= Q;
}while(y != 0); // 当商不为0时进行循环

```

```cpp
#include <iostream>
/**
 * @brief 输入两个非负十进制整数A和B(≤2^30-1)以及D(进制数)，输出A+B的D(1＜D≤10)进制数
 * 输入样例：
 * 123 456 8
 * 输出样例：
 * 1103
 * @return int 
 */
int main()
{
    int a, b, d;
    scanf("%d %d %d", &a, &b, &d);
    int c = a+b, res[40], num = 0;  // 数组res存放A+B的D进制每位数
    do{
        res[num++] = c % d;
        c /= d;
    }while(c != 0);
    for(int i=num-1; i>=0; --i){
        printf("%d", res[i]);
    }

    return 0;
}
```
